(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{19:function(e,a,t){e.exports=t.p+"static/media/face_mask-1.b2df329f.png"},21:function(e,a,t){e.exports=t(40)},26:function(e,a,t){},27:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){},35:function(e,a,t){},36:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(17),r=t.n(l),i=t(3),o=(t(26),t(20)),s=t(14),m=t(1);t(27);var d=function(){return c.a.createElement("nav",{className:"nav-bar"},c.a.createElement("ul",{className:"nav-menu"},c.a.createElement("li",{className:"nav-menu__item"},c.a.createElement(i.b,{className:"nav-menu__link",to:"/App"},"TODOS")),c.a.createElement("li",{className:"nav-menu__item"},c.a.createElement(i.b,{className:"nav-menu__link",to:"/AcceptedChallenges"},"ACEPTADOS"))))},u=(t(33),t(19)),p=t.n(u);var f=function(){return c.a.createElement("header",{className:"header"},c.a.createElement("a",{href:"./",className:"header-container"},c.a.createElement("img",{className:"header-icon",src:p.a,alt:"Icono mujer mascarilla"}),c.a.createElement("h1",{className:"header-title"},"Retos")),c.a.createElement(d,null))};t(34);var h=function(e){return c.a.createElement(i.b,{to:"/challenge/".concat(e.id)},c.a.createElement("li",{key:e.id,className:"challenge-card ".concat(e.type)},c.a.createElement("div",{className:"challenge-card__container"},c.a.createElement("img",{className:"challenge-card__image",src:e.image,alt:"".concat(e.name,"'s pic"),loading:"eager"})),c.a.createElement("h3",{className:"challenge-card__title"},e.name)))};t(35);var g=function(e){var a=e.challenges.map((function(e){return c.a.createElement(h,{key:e.id,id:e.id,type:e.type,image:e.image,name:e.name,description:e.description})}));return c.a.createElement("ul",{className:"challenge-list"},a)};t(36);var E=function(e){var a=e.challenge,t=e.handleAcceptedChallenges,n=e.acceptedChallenges;return c.a.createElement("div",{className:"modal ".concat(a.type)},c.a.createElement(i.b,{className:"button__wrapp",to:"/App"},c.a.createElement("button",{className:"button__close"},"X")),c.a.createElement("div",{className:"modal__content wrapper"},c.a.createElement("div",{className:"modal__content-image"},c.a.createElement("img",{className:"image",src:a.image,alt:"".concat(a.name,"\xb4s pic")})),c.a.createElement("div",{className:"modal__content-info"},c.a.createElement("h1",{className:"modal__title"},a.name),c.a.createElement("p",{className:"modal__description"},a.description),c.a.createElement(i.b,{className:"btn__container",hidden:!!n.find((function(e){return e.id===a.id})),to:"/App"},c.a.createElement("button",{onClick:function(e){t(e.target.dataset.id)},className:"modal__button--accept","data-id":a.id},"Acepto el reto")))))},_=function(){return fetch("https://api.airtable.com/v0/app78rjhFfSaZp3fl/challenges?api_key=keyZ7hg5DA2tYaRqh").then((function(e){return e.json()})).then((function(e){return e.records.map((function(e){return{id:e.id,name:e.fields.name,description:e.fields.description,image:e.fields.image,type:e.fields.type}}))})).catch((function(e){console.error(e)}))},v=function(e,a){return function(t){fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(t.coords.latitude,"+").concat(t.coords.longitude,"&key=ea06f889078043ec889ea061a1a14171&no_annotations=1&language=es")).then((function(e){return e.json()})).then((function(n){var c=n.results[0].components;"es"===c.country_code?fetch("https://raw.githubusercontent.com/datadista/datasets/master/COVID%2019/ccaa_ia14d.csv").then((function(e){return e.text()})).then((function(a){var t=a.lastIndexOf(c.state),n=a.substring(t),l="".concat(c.state,",(\\d+.\\d*)"),r=new RegExp(l,"g").exec(n),i=parseFloat(r[1]);e({ia14d:i})})).catch(a):fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(t.coords.latitude,"+").concat(t.coords.longitude,"&key=ea06f889078043ec889ea061a1a14171&no_annotations=1&language=en")).then((function(e){return e.json()})).then((function(t){var n=t.results[0].components;fetch("https://covid-api.com/api/reports?iso=".concat(n["ISO_3166-1_alpha-3"])).then((function(e){return e.json()})).then((function(a){var t=a.data.find((function(e){return e.region.province===n.state}));e(t?{fatality:t.fatality_rate}:{fatality:a.data[0].fatality_rate})})).catch(a)}))})).catch(a)}},N=function(e){return new Promise((function(a,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(v(a,t),t,e):(console.error("Geolocation unavailable in this device"),t({error:"Geolocation unavailable in this device"}))}))},b=(t(37),function(){return c.a.createElement("section",{className:"landing"},c.a.createElement("header",{className:"landing__header"},c.a.createElement("div",{className:"landing__title"}),c.a.createElement("p",{className:"landing__p"},"NOMBRE APP"),c.a.createElement(i.b,{to:"/App",className:"landing__btn"},"\xbfTe atreves a aceptar el reto?")))}),y=(t(38),t(39),function(e){var a=e.acceptedChallenges.map((function(e){return c.a.createElement(h,{key:e.id,id:e.id,type:e.type,image:e.image,name:e.name,description:e.description})}));return c.a.createElement("ul",{className:"challenge-list"},a)});var A=function(){var e=Object(n.useState)([]),a=Object(s.a)(e,2),t=a[0],l=a[1],r=Object(n.useState)([]),i=Object(s.a)(r,2),d=i[0],u=i[1];Object(n.useEffect)((function(){_().then((function(e){l(e)})),N().then((function(e){e.ia14d?console.log("Incidencia acumulada 14 d\xedas:",e.ia14d):e.fatality&&console.log("Tasa de mortalidad:",e.fatality)})).catch((function(e){console.error("Error retrieving covid data:",e)}))}),[]);var p=function(e){u([].concat(Object(o.a)(d),[t.find((function(a){return a.id===e}))]))};return c.a.createElement("div",{className:"App"},c.a.createElement(m.a,{exact:!0,path:"/"},c.a.createElement(b,null)),c.a.createElement(m.a,{exact:!0,path:"/App"},c.a.createElement(f,null),c.a.createElement("main",{className:"main"},c.a.createElement(g,{challenges:t}))),c.a.createElement(m.a,{exact:!0,path:"/AcceptedChallenges"},c.a.createElement(f,null),c.a.createElement("main",{className:"main"},c.a.createElement(y,{acceptedChallenges:d}))),c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/challenge/:id",render:function(e){var a=e.match.params.id,n=t.find((function(e){return e.id===a}));if(void 0!==n)return c.a.createElement(E,{challenge:n,handleAcceptedChallenges:p,acceptedChallenges:d})}})))};r.a.render(c.a.createElement(i.a,null,c.a.createElement(A,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.a92a4096.chunk.js.map