(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],[,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/face_mask-1.b2df329f.png"},,,,,,,,,,function(e,a,t){e.exports=t(42)},,,,,function(e,a,t){},function(e,a,t){},,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(18),l=t.n(r),i=t(3),o=(t(26),t(20)),s=t(12),m=t(1);t(27);var u=function(){return c.a.createElement("nav",{className:"nav-bar"},c.a.createElement("ul",{className:"nav-menu"},c.a.createElement("li",{className:"nav-menu__item"},c.a.createElement(i.b,{className:"nav-menu__link",to:"/App"},"TODOS")),c.a.createElement("li",{className:"nav-menu__item"},c.a.createElement(i.b,{className:"nav-menu__link",to:"/AcceptedChallenges"},"ACEPTADOS"))))},d=(t(33),t(11)),p=t.n(d);var f=function(){return c.a.createElement("header",{className:"header"},c.a.createElement("a",{href:"./",className:"header-container"},c.a.createElement("img",{className:"header-icon",src:p.a,alt:"Icono mujer mascarilla"}),c.a.createElement("h1",{className:"header-title"},"Fundemic")),c.a.createElement(u,null))};t(34);var h=function(e){return c.a.createElement(i.b,{to:"/challenge/".concat(e.id)},c.a.createElement("li",{key:e.id,className:"challenge-card ".concat(e.type)},c.a.createElement("div",{className:"challenge-card__container"},c.a.createElement("img",{className:"challenge-card__image",src:e.image,alt:"".concat(e.name,"'s pic"),loading:"eager"})),c.a.createElement("h2",{className:"challenge-card__title"},e.name)))};t(35);var E=function(e){var a=e.challenges.map((function(e){return c.a.createElement(h,{key:e.id,id:e.id,type:e.type,image:e.image,name:e.name,description:e.description})}));return c.a.createElement("ul",{className:"challenge-list"},a)},g=(t(36),function(){return c.a.createElement("section",{className:"share_twitter"},c.a.createElement("p",{className:"share_twitter-text"},"Comparte en Twitter lo bien que lo est\xe1s haciendo!"),c.a.createElement("a",{className:"share_twitter-btn",href:"http://twitter.com/share?text=Estoy realizando este reto en Fundemic, \u2728\xbfte apuntas al cambio?\u2728&hashtags=fundemicmola,consolemio&user_mentions=GirlsinTechEs",target:"_blank",rel:"noopener noreferrer"},"Compartir en twitter"))});t(37);var _=function(e){var a=e.challenge,t=e.handleAcceptedChallenges,n=e.acceptedChallenges;return c.a.createElement("div",{className:"modal ".concat(a.type)},c.a.createElement(i.b,{className:"button__wrapp",to:"/App"},c.a.createElement("button",{className:"button__close"},"X")),c.a.createElement("div",{className:"modal__content wrapper"},c.a.createElement("div",{className:"modal__content-image"},c.a.createElement("img",{className:"image",src:a.image,alt:"".concat(a.name,"\xb4s pic")})),c.a.createElement("div",{className:"modal__content-info"},c.a.createElement("h1",{className:"modal__title"},a.name),c.a.createElement("p",{className:"modal__description"},a.description),c.a.createElement(i.b,{className:"btn__container",hidden:!!n.find((function(e){return e.id===a.id})),to:"/App"},c.a.createElement("button",{onClick:function(e){t(e.target.dataset.id)},className:"modal__button--accept","data-id":a.id},"Acepto el reto")),n.find((function(e){return e.id===a.id}))?c.a.createElement(g,null):"")))},v=function(){return fetch("https://api.airtable.com/v0/app78rjhFfSaZp3fl/challenges?api_key=keyZ7hg5DA2tYaRqh").then((function(e){return e.json()})).then((function(e){return e.records.map((function(e){return{id:e.id,name:e.fields.name,description:e.fields.description,image:e.fields.image,type:e.fields.type}}))})).catch((function(e){console.error(e)}))},N=function(e,a){return function(t){fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(t.coords.latitude,"+").concat(t.coords.longitude,"&key=ea06f889078043ec889ea061a1a14171&no_annotations=1&language=es")).then((function(e){return e.json()})).then((function(n){var c=n.results[0].components;"es"===c.country_code?fetch("https://raw.githubusercontent.com/datadista/datasets/master/COVID%2019/ccaa_ia14d.csv").then((function(e){return e.text()})).then((function(a){var t=b(c.state_code),n=a.lastIndexOf(t),r=a.substring(n),l="".concat(t,",(\\d+.\\d*)"),i=new RegExp(l,"g").exec(r),o=parseFloat(i[1]);e({ia14d:o})})).catch(a):fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(t.coords.latitude,"+").concat(t.coords.longitude,"&key=ea06f889078043ec889ea061a1a14171&no_annotations=1&language=en")).then((function(e){return e.json()})).then((function(t){var n=t.results[0].components;fetch("https://covid-api.com/api/reports?iso=".concat(n["ISO_3166-1_alpha-3"])).then((function(e){return e.json()})).then((function(a){var t=a.data.find((function(e){return e.region.province===n.state}));e(t?{fatality:t.fatality_rate}:{fatality:a.data[0].fatality_rate})})).catch(a)}))})).catch(a)}},b=function(e){switch(e){case"EX":return"Extremadura";case"CN":return"Canarias";case"CL":return"Castilla y Le\xf3n";case"AS":return"Asturias";case"PV":return"Pa\xeds Vasco";case"RI":return"La Rioja";case"ML":return"Melilla";case"CE":return"Ceuta";case"CB":return"Cantabria";case"AR":return"Arag\xf3n";case"AN":return"Andaluc\xeda";case"MC":return"Murcia";case"CM":return"Castilla La Mancha";case"NC":return"Navarra";case"CT":return"Catalu\xf1a";case"VC":return"C. Valenciana";case"GA":return"Galicia";case"MD":return"Madrid";case"IB":return"Baleares";default:return"Espa\xf1a"}},C=function(e){return new Promise((function(a,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(N(a,t),t,e):(console.error("Geolocation unavailable in this device"),t({error:"Geolocation unavailable in this device"}))}))},y=(t(38),function(e){var a;return c.a.createElement("section",{className:"landing ".concat((a=e.level,0===a?"outdoor":1===a?"beCareful":"indoor"))},c.a.createElement("header",{className:"landing__header"},c.a.createElement("img",{className:"landing__icon",src:p.a,alt:"icono de la web chica con mascarilla"}),c.a.createElement("p",{className:"landing__p"},"FUNDEMIC"),c.a.createElement("p",{className:"status",hidden:0!==e.level},"Hoy es un buen d\xeda para salir (con cuidado)\u2728"),c.a.createElement("p",{className:"status",hidden:1!==e.level},"Si sales hoy, extrema precauciones\ud83d\ude09"),c.a.createElement("p",{className:"status",hidden:2!==e.level},"Como en casa en ning\xfan lado\ud83c\udfe1"),c.a.createElement(i.b,{to:"/App",className:"landing__btn"},"\xbfTe atreves a aceptar el reto?")))}),A=(t(39),t(40),function(e){var a=e.acceptedChallenges.map((function(e){return c.a.createElement(h,{key:e.id,id:e.id,type:e.type,image:e.image,name:e.name,description:e.description})}));return c.a.createElement("ul",{className:"challenge-list"},a)}),j=(t(41),function(){return c.a.createElement("footer",{className:"page__footer"},c.a.createElement("div",{className:"footer__wrapper"},c.a.createElement("section",{className:"footer"},c.a.createElement("div",{className:"footer__menu"},c.a.createElement("a",{href:"#home",title:"Ir a Inicio"},"Fundemic"),c.a.createElement("div",{className:"copy"},c.a.createElement("small",null,"console.mio \xa9 2020 "))))))});var w=function(){var e=Object(n.useState)([]),a=Object(s.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)([]),i=Object(s.a)(l,2),u=i[0],d=i[1],p=Object(n.useState)([]),h=Object(s.a)(p,2),g=h[0],N=h[1];Object(n.useEffect)((function(){v().then((function(e){r(e)})),C().then((function(e){e.ia14d?(console.log("Incidencia acumulada 14 d\xedas:",e.ia14d),e.ia14d<200?N(0):e.ia14d<400?N(1):N(2)):e.fatality&&(console.log("Tasa de mortalidad:",e.fatality),e.fatality<.01?N(0):e.fatality<.04?N(1):N(2))})).catch((function(e){console.error("Error retrieving covid data:",e)}))}),[]);var b=function(e){d([].concat(Object(o.a)(u),[t.find((function(a){return a.id===e}))]))};return c.a.createElement("div",{className:"App"},c.a.createElement(m.a,{exact:!0,path:"/"},c.a.createElement(y,{level:g})),c.a.createElement(m.a,{exact:!0,path:"/App"},c.a.createElement(f,null),c.a.createElement("main",{className:"main"},c.a.createElement(E,{challenges:t})),c.a.createElement(j,null)),c.a.createElement(m.a,{exact:!0,path:"/AcceptedChallenges"},c.a.createElement(f,null),c.a.createElement("main",{className:"main"},c.a.createElement(A,{acceptedChallenges:u}))),c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/challenge/:id",render:function(e){var a=e.match.params.id,n=t.find((function(e){return e.id===a}));if(void 0!==n)return c.a.createElement(_,{challenge:n,handleAcceptedChallenges:b,acceptedChallenges:u})}})))};l.a.render(c.a.createElement(i.a,null,c.a.createElement(w,null)),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.eb4c3819.chunk.js.map